{"version":3,"file":"static/js/844.41bac221.chunk.js","mappings":"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","sources":["webpack://react-homework-5/./src/components/ButtonMore/ButtonMore.module.css?ad63","components/ButtonMore/ButtonMore.js","webpack://react-homework-5/./src/components/MoviesList/MoviesList.module.css?de3d","components/MoviesList/MoviesList.js","webpack://react-homework-5/./src/components/SearchMovieForm/SearchMovieForm.module.css?dfe9","components/SearchMovieForm/SearchMovieForm.js","webpack://react-homework-5/./src/pages/Movies/Movies.module.css?82ee","pages/Movies/Movies.js","services/api.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"ButtonMore_container__VI2bK\",\"button\":\"ButtonMore_button__YPyE-\"};","import React from 'react';\nimport css from './ButtonMore.module.css';\nimport PropTypes from 'prop-types';\n\nexport const ButtonLoadMore = ({ getLoadMore }) => {\n  return (\n    <div className={css.container}>\n      <button type=\"button\" className={css.button} onClick={getLoadMore}>\n        Load more\n      </button>\n    </div>\n  );\n};\n\nButtonLoadMore.propTypes = {\n  getLoadMore: PropTypes.func.isRequired,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"moviesList\":\"MoviesList_moviesList__P6SP5\",\"moviesItem\":\"MoviesList_moviesItem__r+0sq\",\"movieTitle\":\"MoviesList_movieTitle__CxO8p\",\"rating\":\"MoviesList_rating__kpX1I\"};","import { Loader } from 'components/Loader/Loader';\nimport { Suspense } from 'react';\nimport { NavLink, Outlet, useLocation } from 'react-router-dom';\nimport css from './MoviesList.module.css';\n\nimport defaultPoster from 'No_image_poster.png';\n\nexport const MoviesList = ({ movies }) => {\n  const location = useLocation();\n  return (\n    <ul className={css.moviesList}>\n      {movies?.map(({ id, poster_path, original_title, vote_average }) => (\n        <li key={`${id}${Date.now()}`} className={css.moviesItem}>\n          <NavLink to={`/movies/${id}`} state={{ from: location }}>\n            <img\n              src={\n                poster_path\n                  ? `https://image.tmdb.org/t/p/w500${poster_path}`\n                  : defaultPoster\n              }\n              alt={original_title}\n            />\n            <p className={css.movieTitle}>{original_title}</p>\n          </NavLink>\n          <div className={css.rating}> {vote_average.toFixed(1)}</div>\n        </li>\n      ))}\n      <Suspense fallback={<Loader />}>\n        <Outlet />\n      </Suspense>\n    </ul>\n  );\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"formContainer\":\"SearchMovieForm_formContainer__iHX5k\",\"form\":\"SearchMovieForm_form__sVLhq\",\"button\":\"SearchMovieForm_button__N7tZi\",\"input\":\"SearchMovieForm_input__sdVX9\"};","import { BsSearch } from 'react-icons/bs';\nimport css from './SearchMovieForm.module.css';\nimport { useState } from 'react';\nimport toast, { Toaster } from 'react-hot-toast';\n\nexport const SearchMovieForm = ({ onSubmit }) => {\n  const [text, setText] = useState('');\n\n  const handleRequestChange = e => {\n    setText(e.currentTarget.value.toLowerCase());\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (text.trim() === '') {\n      toast.error('Error! Incorrect query. Please another query.');\n      return;\n    }\n    onSubmit(e.target.query.value);\n    e.target.reset();\n    setText('');\n  };\n\n  return (\n    <div className={css.formContainer}>\n      <form className={css.form} onSubmit={handleSubmit}>\n        <input\n          className={css.input}\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search films\"\n          name=\"query\"\n          value={text}\n          onChange={handleRequestChange}\n        />\n        <button\n          type=\"submit\"\n          className={css.button}\n          disabled={!text && 'disabled'}\n        >\n          <BsSearch size=\"1em\" />\n        </button>\n      </form>\n      <Toaster />\n    </div>\n  );\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"searchResultText\":\"Movies_searchResultText__gFu35\",\"accent\":\"Movies_accent__QWzaV\"};","import { useSearchParams } from 'react-router-dom';\nimport { SearchMovieForm } from 'components/SearchMovieForm/SearchMovieForm';\nimport { useEffect, useState } from 'react';\nimport toast, { Toaster } from 'react-hot-toast';\nimport { MoviesList } from 'components/MoviesList/MoviesList';\nimport { getSearchMovies } from 'services/api';\nimport { Loader } from 'components/Loader/Loader';\nimport { ButtonLoadMore } from 'components/ButtonMore/ButtonMore';\nimport css from './Movies.module.css';\n\nconst Movies = () => {\n  const [movies, setMovies] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [page, setPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [totalResults, setTotalResults] = useState(0);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const searchQuery = searchParams.get('query') ?? '';\n\n  useEffect(() => {\n    const fetchSearch = async () => {\n      try {\n        if (!searchQuery) {\n          setMovies([]);\n          setTotalPages(1);\n          setPage(1);\n          setTotalResults(0);\n          return;\n        }\n        setIsLoading(true);\n        const { results, total_pages, total_results } = await getSearchMovies(\n          searchQuery,\n          page\n        );\n        if (results.length === 0) {\n          toast.error('Error! Nothing found. Please use another query');\n          return;\n        }\n        setTotalResults(total_results);\n        setMovies(prevState => [...prevState, ...results]);\n        setTotalPages(total_pages);\n      } catch (error) {\n        toast.error('Error! Please try again');\n        console.log(error);\n      } finally {\n        console.log('finally');\n        setIsLoading(false);\n      }\n    };\n    fetchSearch();\n  }, [searchQuery, page]);\n\n  const onSearchMovie = value => {\n    if (value === searchQuery) {\n      toast.error('Error! Repeated request. Please use another query.');\n      return;\n    }\n    setMovies([]);\n    setTotalPages(1);\n    setPage(1);\n    setTotalResults(0);\n    setSearchParams({ query: value.trim() });\n  };\n\n  const getLoadMore = totalPages => {\n    page < totalPages && setPage(prevState => prevState + 1);\n  };\n\n  return (\n    <>\n      <SearchMovieForm onSubmit={onSearchMovie} />\n      {searchQuery && (\n        <>\n          <p className={css.searchResultText}>\n            <span className={css.accent}>\n              {new Intl.NumberFormat('ru').format(totalResults)} movies\n            </span>{' '}\n            found for\n            <span className={css.accent}> \"{searchQuery}\"</span>\n          </p>\n        </>\n      )}\n\n      {movies.length > 0 && <MoviesList movies={movies} />}\n      {page < totalPages && (\n        <ButtonLoadMore getLoadMore={() => getLoadMore(totalPages)} />\n      )}\n      {isLoading && <Loader />}\n      <Toaster />\n    </>\n  );\n};\n\nexport default Movies;\n","import axios from 'axios';\nconst AUTH_TOKEN =\n  'eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyY2Y4OTAwMmU5YzMyYzNmMDhkZGFhMGQ5ZDBkNTEwMCIsInN1YiI6IjYzNWMzNTkxZjI4ODM4MDA5YmQwMzg4NyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.fIKN_YBMgtp3274NYKbPzwIncyl81UfUTer5bLs5jLo';\naxios.defaults.baseURL = 'https://api.themoviedb.org/3/';\naxios.defaults.headers.common['Authorization'] = `Bearer ${AUTH_TOKEN}`;\n\nexport const getTrending = async page => {\n  const { data } = await axios.get(\n    `trending/movie/week?page=${page}&language=en-US`\n  );\n  console.log(data);\n  return data;\n};\n\nexport const getOneMovie = async id => {\n  const { data } = await axios.get(`movie/${id}?language=en-US`);\n  console.log(data);\n  return data;\n};\n\nexport const getSearchMovies = async (query, page) => {\n  const { data } = await axios.get(\n    `search/movie?language=en-US&query=${query}&page=${page}`\n  );\n  return data;\n};\n\nexport const getCastMovie = async id => {\n  const { data } = await axios.get(`movie/${id}/credits?language=en-US`);\n  console.log(data);\n  return data;\n};\n\nexport const getReviewsMovie = async id => {\n  const { data } = await axios.get(`movie/${id}/reviews?language=en-US&page=1`);\n  return data;\n};\n"],"names":["ButtonLoadMore","getLoadMore","className","css","type","onClick","MoviesList","movies","location","useLocation","map","id","poster_path","original_title","vote_average","to","state","from","src","defaultPoster","alt","toFixed","Date","now","Suspense","fallback","Loader","SearchMovieForm","onSubmit","useState","text","setText","e","preventDefault","trim","target","query","value","reset","toast","autoComplete","autoFocus","placeholder","name","onChange","currentTarget","toLowerCase","disabled","size","setMovies","isLoading","setIsLoading","page","setPage","totalPages","setTotalPages","totalResults","setTotalResults","useSearchParams","searchParams","setSearchParams","searchQuery","get","useEffect","fetchSearch","getSearchMovies","results","total_pages","total_results","length","prevState","console","log","Intl","NumberFormat","format","axios","getTrending","data","getOneMovie","getCastMovie","getReviewsMovie"],"sourceRoot":""}