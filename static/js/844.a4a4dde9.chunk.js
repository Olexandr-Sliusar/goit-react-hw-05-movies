"use strict";(self.webpackChunkreact_homework_5=self.webpackChunkreact_homework_5||[]).push([[844],{1106:function(e,t,r){r.d(t,{t:function(){return u}});r(2791);var n="ButtonMore_container__VI2bK",a="ButtonMore_button__YPyE-",s=r(184),u=function(e){var t=e.getLoadMore;return(0,s.jsx)("div",{className:n,children:(0,s.jsx)("button",{type:"button",className:a,onClick:t,children:"Load more"})})}},6455:function(e,t,r){r.d(t,{O:function(){return m}});var n=r(2447),a=r(2791),s=r(7689),u=r(1087),o="MoviesList_moviesList__P6SP5",c="MoviesList_moviesItem__r+0sq",i="MoviesList_movieTitle__CxO8p",l="MoviesList_rating__kpX1I",f=r.p+"static/media/No_image_poster.82f2d765e3949d43df8d.png",p=r(184),m=function(e){var t=e.movies,r=(0,s.TH)();return(0,p.jsxs)("ul",{className:o,children:[null===t||void 0===t?void 0:t.map((function(e){var t=e.id,n=e.poster_path,a=e.original_title,s=e.vote_average;return(0,p.jsxs)("li",{className:c,children:[(0,p.jsxs)(u.OL,{to:"/movies/".concat(t),state:{from:r},children:[(0,p.jsx)("img",{src:n?"https://image.tmdb.org/t/p/w500".concat(n):f,alt:a}),(0,p.jsx)("p",{className:i,children:a})]}),(0,p.jsxs)("div",{className:l,children:[" ",s.toFixed(1)]})]},"".concat(t).concat(Date.now()))})),(0,p.jsx)(a.Suspense,{fallback:(0,p.jsx)(n.a,{}),children:(0,p.jsx)(s.j3,{})})]})}},8101:function(e,t,r){r.r(t),r.d(t,{default:function(){return N}});var n=r(3433),a=r(5861),s=r(9439),u=r(7757),o=r.n(u),c=r(1087),i=r(8185),l="SearchMovieForm_formContainer__iHX5k",f="SearchMovieForm_form__sVLhq",p="SearchMovieForm_button__N7tZi",m="SearchMovieForm_input__sdVX9",v=r(2791),d=r(3402),h=r(184),x=function(e){var t=e.onSubmit,r=(0,v.useState)(""),n=(0,s.Z)(r,2),a=n[0],u=n[1];return(0,h.jsxs)("div",{className:l,children:[(0,h.jsxs)("form",{className:f,onSubmit:function(e){e.preventDefault(),""!==a.trim()?(t(e.target.query.value),e.target.reset(),u("")):d.ZP.error("Error! Incorrect query. Please another query.")},children:[(0,h.jsx)("input",{className:m,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search films",name:"query",value:a,onChange:function(e){u(e.currentTarget.value.toLowerCase())}}),(0,h.jsx)("button",{type:"submit",className:p,disabled:!a&&"disabled",children:(0,h.jsx)(i.dVI,{size:"1em"})})]}),(0,h.jsx)(d.x7,{})]})},_=r(6455),g=r(4390),b=r(2447),j=r(1106),Z="Movies_searchResultText__gFu35",y="Movies_accent__QWzaV",N=function(){var e,t=(0,v.useState)([]),r=(0,s.Z)(t,2),u=r[0],i=r[1],l=(0,v.useState)(!1),f=(0,s.Z)(l,2),p=f[0],m=f[1],N=(0,v.useState)(1),w=(0,s.Z)(N,2),M=w[0],k=w[1],S=(0,v.useState)(1),I=(0,s.Z)(S,2),L=I[0],q=I[1],P=(0,v.useState)(0),z=(0,s.Z)(P,2),C=z[0],F=z[1],U=(0,c.lr)(),Y=(0,s.Z)(U,2),E=Y[0],J=Y[1],O=null!==(e=E.get("query"))&&void 0!==e?e:"";(0,v.useEffect)((function(){var e=function(){var e=(0,a.Z)(o().mark((function e(){var t,r,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,O){e.next=7;break}return i([]),q(1),k(1),F(0),e.abrupt("return");case 7:return m(!0),e.next=10,(0,g.V0)(O,M);case 10:if(t=e.sent,r=t.results,a=t.total_pages,s=t.total_results,0!==r.length){e.next=17;break}return d.ZP.error("Error! Nothing found. Please use another query"),e.abrupt("return");case 17:F(s),i((function(e){return[].concat((0,n.Z)(e),(0,n.Z)(r))})),q(a),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(0),d.ZP.error("Error! Please try again"),console.log(e.t0);case 26:return e.prev=26,m(!1),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[0,22,26,29]])})));return function(){return e.apply(this,arguments)}}();e()}),[O,M]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(x,{onSubmit:function(e){e!==O?(i([]),q(1),k(1),F(0),J({query:e.trim()})):d.ZP.error("Error! Repeated request. Please use another query.")}}),O&&(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("p",{className:Z,children:[(0,h.jsxs)("span",{className:y,children:[new Intl.NumberFormat("ru").format(C)," movies"]})," ","found for",(0,h.jsxs)("span",{className:y,children:[' "',O,'"']})]})}),u.length>0&&(0,h.jsx)(_.O,{movies:u}),M<L&&(0,h.jsx)(j.t,{getLoadMore:function(){return function(e){M<e&&k((function(e){return e+1}))}(L)}}),p&&(0,h.jsx)(b.a,{}),(0,h.jsx)(d.x7,{})]})}},4390:function(e,t,r){r.d(t,{Eb:function(){return l},Hg:function(){return o},Hu:function(){return f},V0:function(){return i},rs:function(){return c}});var n=r(5861),a=r(7757),s=r.n(a),u=r(1243);u.Z.defaults.baseURL="https://api.themoviedb.org/3/",u.Z.defaults.headers.common.Authorization="Bearer ".concat("eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyY2Y4OTAwMmU5YzMyYzNmMDhkZGFhMGQ5ZDBkNTEwMCIsInN1YiI6IjYzNWMzNTkxZjI4ODM4MDA5YmQwMzg4NyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.fIKN_YBMgtp3274NYKbPzwIncyl81UfUTer5bLs5jLo");var o=function(){var e=(0,n.Z)(s().mark((function e(t){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("trending/movie/week?page=".concat(t,"&language=en-US"));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=(0,n.Z)(s().mark((function e(t){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("movie/".concat(t,"?language=en-US"));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=(0,n.Z)(s().mark((function e(t,r){var n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("search/movie?language=en-US&query=".concat(t,"&page=").concat(r));case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),l=function(){var e=(0,n.Z)(s().mark((function e(t){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("movie/".concat(t,"/credits?language=en-US"));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,n.Z)(s().mark((function e(t){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("movie/".concat(t,"/reviews?language=en-US&page=1"));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=844.a4a4dde9.chunk.js.map